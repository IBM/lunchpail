{{ if and (not .Values.lite) (eq .Values.app "hapq") }}
apiVersion: codeflare.dev/v1alpha1
kind: Run
metadata:
  name: hapq
  namespace: codeflare-watsonxai-preprocessing
spec:
  workers: 0
  application:
    name: hapq

  {{- if eq .Values.supportsGpu true }}
  size: md
  supportsGpu: true
  options: "-b 8 --output_folder=/tmp --checkpoint_folder=/tmp"
  {{- else }}
  size: sm
  supportsGpu: false
  options: "--cpus_per_actor 1 -b 8 --output_folder=/tmp --checkpoint_folder=/tmp"
  {{- end }}
{{ end }}
