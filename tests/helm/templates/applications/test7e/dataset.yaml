{{ if or (not .Values.app) (eq .Values.app "tests") (eq .Values.app "test7e") }}
apiVersion: {{ .Values.datashim.apiVersion }}
kind: Dataset
metadata:
  name: test7edata # avoid dashes for now: https://github.com/datashim-io/datashim/issues/285
  namespace: {{ .Values.namespace }}
  labels:
    app.kubernetes.io/component: taskqueue
spec:
  local:
    type: "COS"
    bucket: test7e
    endpoint: "http://codeflare-s3.codeflare-system.svc.cluster.local:9000"
    secret-name: test7edata-cfsecret
    secret-namespace: {{ .Values.namespace }}
    #readonly: "true" # default is false
    provision: "true"
{{- end }}
