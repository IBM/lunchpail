{{ if or (not .Values.app) (eq .Values.app "tests") (eq .Values.app "test7d") }}
apiVersion: codeflare.dev/v1alpha1
kind: WorkerPool
metadata:
  name: test7d-pool1
  namespace: {{ .Values.namespace.user }}
spec:
  # here, we ask that this pool run in a particular kubernetes cluster
  target:
    kubernetes:
      context: {{ .Values.kubernetes.context }}
      config:
        value: {{ .Values.kubernetes.config }}

  run: test7d
  workers:
    count: 1
    size: xxs
{{- end }}
