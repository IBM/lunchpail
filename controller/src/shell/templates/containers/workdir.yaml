{{- define "containers/workdir" }}
{{- if and .Values.workdir.repo .Values.workdir.pat.user .Values.workdir.pat.secret }}
- name: workdir
  image: {{ print .Values.lunchpail.image.registry "/" .Values.lunchpail.image.repo "/jaas-workdir-component:" .Values.lunchpail.image.version }}
  volumeMounts:
    {{ include "workdir/volumeMount" . | indent 4 }}
  env:
    {{ include "workdir/env" . | indent 4 }}
    - name: REPO
      value: {{ .Values.workdir.repo }}
  envFrom:
    - secretRef:
        name: {{ print .Release.Name "-workdir" }}
{{- end }}
{{- end }}
