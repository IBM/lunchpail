$size: 1em;
$label-size: 0.5625rem;

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.codeflare-workqueues {
  line-height: #{$size * 1.125};
}

.codeflare--dashboard[data-is-dark-mode="false"] {
  &,
  &[data-theme="Paired"] {
    --codeflare-cell-color-2: #6a3d9a;
  }
}

.codeflare--dashboard {
  --codeflare-cell-color-none: #d2d2d2;

  &,
  &[data-theme="Paired"] {
    --codeflare-cell-color-0: #1f78b4;
    --codeflare-cell-color-1: #33a02c;
    --codeflare-cell-color-2: #cab2d6;
    --codeflare-cell-color-3: #fb9a99;
    --codeflare-cell-color-4: #ff7f00;
  }

  &[data-theme="Dark2"] {
    --codeflare-cell-color-0: #1b9e77;
    --codeflare-cell-color-1: #d95f02;
    --codeflare-cell-color-2: #7570b3;
    --codeflare-cell-color-3: #e7298a;
    --codeflare-cell-color-4: #66a61e;
  }

  &[data-theme="Accent"] {
    --codeflare-cell-color-0: #7fc97f;
    --codeflare-cell-color-1: #beaed4;
    --codeflare-cell-color-2: #fdc086;
    --codeflare-cell-color-3: #ffff99;
    --codeflare-cell-color-4: #386cb0;
  }

  &[data-theme="Set1"] {
    --codeflare-cell-color-0: #ff7f00;
    --codeflare-cell-color-1: #984ea3;
    --codeflare-cell-color-2: #4daf4a;
    --codeflare-cell-color-3: #377eb8;
    --codeflare-cell-color-4: #e41a1c;
  }

  &[data-theme="Set2"] {
    --codeflare-cell-color-0: #66c2a5;
    --codeflare-cell-color-1: #fc8d62;
    --codeflare-cell-color-2: #8da0cb;
    --codeflare-cell-color-3: #e78ac3;
    --codeflare-cell-color-4: #a6d854;
  }
}

.codeflare--grid-cell {
  width: $size;
  height: $size;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 70ms ease-in-out;

  span {
    color: white;
    display: flex;
    font-size: $label-size;
    mix-blend-mode: overlay;
    /*animation: spin 4s linear infinite;*/
  }

  &[data-dataset="0"] {
    --cell-color: var(--codeflare-cell-color-0);
  }
  &[data-dataset="1"] {
    --cell-color: var(--codeflare-cell-color-1);
  }
  &[data-dataset="2"] {
    --cell-color: var(--codeflare-cell-color-2);
  }
  &[data-dataset="3"] {
    --cell-color: var(--codeflare-cell-color-3);
  }
  &[data-dataset="4"] {
    --cell-color: var(--codeflare-cell-color-3);
  }
  &[data-type="waiting"] {
    --cell-color: #d2d2d2;
  }
  &[data-type="placeholder"] {
    --cell-color: transparent;

    &,
    &:hover {
      cursor: unset;
      outline: none;
    }

    /** This gives an X inside the cell */
    &:before
    /*&:after*/ {
      position: absolute;
      content: " ";
      height: 0.7 * $size;
      width: 2px;
      background-color: var(--pf-v5-global--BorderColor--100);
    }
    &:before {
      transform: rotate(90deg);
    }
    &:after {
      transform: rotate(-45deg);
    }
  }

  & {
    background-color: var(--cell-color);
  }

  &[data-type="inbox"],
  &[data-type="outbox"] {
    filter: grayscale(0.05) opacity(0.9);
  }
  &[data-type="processing"] {
    filter: saturate(1.5);
  }

  &:hover {
    cursor: pointer;
    outline: 1px solid var(--pf-v5-global--Color--100);
    outline-offset: -1px;
  }
}

html.pf-v5-theme-dark {
  .codeflare--grid-cell {
    &[data-type="worker"] {
      background-color: var(--pf-v5-global--palette--light-blue-100);
    }
  }
}
