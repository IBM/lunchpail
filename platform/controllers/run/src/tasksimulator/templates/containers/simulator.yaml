{{- define "codeflare.dev/containers/simulator" }}
- name: simulator
  image: ghcr.io/project-codeflare/codeflare-tasksimulator-parquet-component:dev
  volumeMounts:
    - name: script
      mountPath: "/opt/tasksimulator/bin"
  command: ["/opt/tasksimulator/bin/simulator.sh"]
  env:
    - name: TASKS
      value: {{ quote .Values.injectedTasksPerInterval }}
    - name: INTERVAL
      value: {{ quote .Values.intervalSeconds }}
    - name: FORMAT
      value: {{ quote .Values.format }}
    - name: COLUMNS
      value: {{ quote .Values.columns }}
    - name: COLUMN_TYPES
      value: {{ quote .Values.columnTypes }}
    {{- include "codeflare.dev/queue.env.dataset" . | indent 4 }}
{{- end }}
