{{- define "codeflare.dev/queue.env" }}
- name: WORKQUEUE
  value: /queue
- name: POOL
  value: {{ .Values.name }} # workerpool name
- name: RUN_NAME
  value: {{ .Values.runName }} # name of run in which this pool participates
{{- end }}

{{- define "codeflare.dev/queue.env.dataset" }}
- name: S3_ENDPOINT_VAR
  value: {{ print .Values.queue.dataset "_endpoint" }}
- name: AWS_ACCESS_KEY_ID_VAR
  value: {{ print .Values.queue.dataset "_accessKeyID" }}
- name: AWS_SECRET_ACCESS_KEY_VAR
  value: {{ print .Values.queue.dataset "_secretAccessKey" }}
- name: TASKQUEUE_VAR
  value: {{ print .Values.queue.dataset "_bucket" }}
- name: LUNCHPAIL
  value: {{ .Values.lunchpail }}
{{- end }}

{{- define "codeflare.dev/queue.volumeMount" }}
- mountPath: /queue
  name: queue
{{- end }}

{{- define "codeflare.dev/queue.volume" }}
- name: queue
  emptyDir: {}
{{- end }}
