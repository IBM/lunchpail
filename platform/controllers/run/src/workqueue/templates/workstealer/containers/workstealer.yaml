{{- define "jaas.dev/containers/workstealer" }}
- name: workstealer
  image: {{ print .Values.image.registry "/" .Values.image.repo "/jaas-workstealer-component:" .Values.image.version }}
  env:
    - name: RUN_NAME
      value: {{ .Values.name }}
    - name: UNASSIGNED_INBOX
      value: {{ .Values.inbox | default "inbox" }}
    - name: FULLY_DONE_OUTBOX
      value: {{ .Values.outbox | default "outbox" }}
    - name: WORKER_QUEUES_SUBDIR
      value: queues
    - name: QUEUE
      value: {{ print "/mnt/datasets/" .Values.taskqueue.dataset "/" .Values.name }}

  {{- if .Values.rbac.runAsRoot }}
  securityContext:
    privileged: true
  {{- end }}
{{- end }}
