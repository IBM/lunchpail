{{- define "codeflare.dev/containers/dispatcher" }}
- name: dispatcher
  image: ghcr.io/project-codeflare/codeflare-tasksimulator-parquet-component:dev
  volumeMounts:
    - name: script
      mountPath: "/opt/tasksimulator/bin"
  command: ["/opt/tasksimulator/bin/simulator.sh"]
  env:
    - name: RUN_NAME
      value: {{ .Values.runName }}
    - name: METHOD
      value: {{ quote .Values.method }}
    - name: TASKS
      value: {{ quote .Values.injectedTasksPerInterval }}
    - name: INTERVAL
      value: {{ quote .Values.intervalSeconds }}
    - name: FORMAT
      value: {{ quote .Values.format }}
    - name: COLUMNS
      value: {{ quote .Values.columns }}
    - name: COLUMN_TYPES
      value: {{ quote .Values.columnTypes }}
    - name: SWEEP_MIN
      value: {{ quote .Values.sweep.min }}
    - name: SWEEP_MAX
      value: {{ quote .Values.sweep.max }}
    - name: SWEEP_STEP
      value: {{ quote .Values.sweep.step }}
    {{- include "codeflare.dev/queue.env.dataset" . | indent 4 }}
{{- end }}
